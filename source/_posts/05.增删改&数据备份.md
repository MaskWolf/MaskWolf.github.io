---
title: 05.增删改&数据备份
thumbnail: /images/sql-databse.jpg
toc: true
date: 2019-04-16 11:31:22
categories:
tags:
	- SQL
---

主键：在一张表中，某个字段的值是非空且唯一的，可以将此字段作为主键
主键的作用：唯一的标识一条数据
<!-- more -->
### 增加数据
insert into 表名（字段名，字段名，字段...）values(值1，值2，值...)
- 注意1：主键必须给值，允许为空的字段可以不给值
- 注意2：插入语句表名后跟的字段名为要赋值的字段，值和字段必须一一对应
- 注意3：如果是全字段插入，可以省略字段名

```sql
--在部门表中新增一个部门信息，信息内容为 编号：50，名称：LOL学院，地址：重庆
insert into dept(deptno,dname,loc)values(50,'LOL学院','重庆')
insert into dept values(50,'LOL学院','重庆')
insert into dept(deptno,dname,loc)values(60,'LOL学院','重庆')
select * from dept
--在部门中新增一条数据，只有部门编号和名称，没有地址
insert into dept(deptno,dname)values(70,'吃鸡学院')
```

### 删除数据
删除表中的所有记录：delete from 表名
truncate table 表名		删除表中所有的记录，但是效率高于delete
删除表中符合条件的数据：delete from 表名 where 条件
```sql
delete from dept
delete from dept where deptno=50
select * from dept

truncate table dept
```

### 更新数据
update 表名 set 字段名=新的值，字段名=新的值...(将字段的值全部改为新的值)
update 表名 set 字段名=新的值，字段名=新的值... where 条件(将符合条件的字段的值改为新的值)
```sql
update dept set dname='java学院',loc='上海' where deptno=70
select * from dept
```

### 数据的备份
注意：只会备份表的结构和表的数据，约束不会备份
表级别备份
1. 全部备份该表：create table 新的表名 as select * from 备份表名
2. 部分备份：create table 新的表名 as select 字段名，字段名，... from 备份表名

```sql
create table deptBak as select * from dept		--全部备份
create table depBak2 al select deptno,dname from dept 		--部分备份
```

### 数据整体插入
insert into 表名 select * from 表名
注意：查询语句的结果的各字段必须和插入表名的各字段一一对应

```sql
insert into deptBak select * from dept
select * from deptBak
```

---
title: HTTP与HTTPS
toc: true
date: 2020-5-31 15:11:35
categories:
tags:
	- 计算机网路
---

## HTTP (超文本传输协议)

### 主要特点
1. 支持客户/服务器模式
2. 简单快速
只需要传输请求方法和路径
<!-- more -->
3. 灵活
允许传输任意类型的对象
4. 无连接
每次连接只处理一个请求，即使长连接也是下层实现对上层透明
5. 无状态
对事物处理没有能力

当前多版本共存，主流版本是HTTP/1.1，相比较HTTP/1.0其引入了keepalive(长连接技术)

### HTTP的请求结构
![](http://cdn.liaojincan.top/20200531150949.png)

### HTTP的响应结构
![](http://cdn.liaojincan.top/20200531151332.png)

### HTTP请求/响应的步骤
1. 客户端连接到Web服务器
2. 发送HTTP请求
3. 服务器接受请求并返回HTTP响应
4. 释放TCP连接
5. 客户端浏览器解析HTML内容

### 在浏览器地址栏键入URL，按下回车之后经历的流程
1. DNS解析
逐层查询DNS缓存：浏览器缓存 → 系统缓存 → 路由器缓存 → 权限域名服务器缓存 → 顶级域名服务器缓存 → 根域名服务器缓存
2. TCP连接
3. 发送HTTP请求
4. 服务器处理请求并返回HTTP报文
5. 浏览器解析渲染页面，同时释放连接

### HTTP状态码
- 1xx : 指示信息--表示请求已接收,继续处理
- 2xx : 成功--表示请求已被成功接收、理解、接受
- 3xx : 重定向--要完成请求必须进行更进一步的操作
- 4xx : 客户端错误--请求有语法错误或请求无法实现
- 5xx : 服务器端错误--服务器未能实现合法的请求

**常见状态码**
- 200 OK: 正常返回信息
- 400 Bad Request: 客户端请求有语法错误，不能被服务器所理解
- 401 Unauthorized: 请求未经授权，此状态代码必须和WWW-Authenticate报头域一起使用
- 403 Forbidden: 服务器收到请求，但是拒绝提供服务
- 404 Not Found: 请求资源不存在，eg，输入了错误的URL
- 500 Internal Server Error: 服务器发生不可预期的错误
- 503 Server Unavailable: 服务器当前不能处理客户端的请求,一段时间后可能恢复正常

### GET请求和POST请求的区别
- HTTP报文层面
GET将请求信息放在URL中，POST将请求信息放在报文体中
- 数据库层面
GET请求符合幂等性 (对数据库一次操作和多次操作获得的结果是一致的) 和安全性 (对数据库的操作没有改变数据库中的数据) ，POST请求不符合
- 其他层面
GET请求可以被缓存、被存储，而POST不行

### Cookie和Session的区别
- Cookie数据存放在客户的浏览器上, Session数据放在服务器上
- Session相对于Cookie更安全
- 若考虑减轻服务器负担,应当使用Cookie

## HTTPS
![](http://cdn.liaojincan.top/20200531160027.png)

**SSL(Security Sockets Layer，安全套接层)**
- 为网络通信提供安全及数据完整性的一种安全协议
- 是操作系统对外的API，SSL3.0后更名为TLS
- 采用身份验证和数据加密保证网络通信的安全和数据的完整性

### HTTPS数据的传输流程
1. 浏览器将支持的加密算法信息发送给服务器
2. 服务器选择一套浏览器支持的加密算法,以证书的形式回发浏览器
3. 浏览器验证证书合法性,并结合证书公钥加密信息发送给服务器
4. 服务器使用私钥解密信息,验证哈希,加密响应消息回发浏览器
5. 浏览器解密响应消息,并对消息进行验真,之后进行加密交互数据

### HTTP与HTTPS的区别
- HTTPS需要到CA申请证书, HTTP不需要
- HTTPS密文传输, HTTP明文传输
- 连接方式不同, HTTPS默认使用443端口, HTTP使用80端口
- HTTPS=HTTP+加密+认证+完整性保护,较HTTP安全